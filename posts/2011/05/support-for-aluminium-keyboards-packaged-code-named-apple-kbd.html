<!DOCTYPE html>
<html lang="en">
<head>
  
  <title>(blog-dump 'dciabrin) &mdash; Support for Aluminium Keyboards packaged, code-named apple-kbd</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="initial-scale=1" />

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>

  <link rel="stylesheet" type="text/css" href="http://damien.ciabrini.name/theme/lingonberry/css/style.css" />
  <link rel="stylesheet" type="text/css" href="http://damien.ciabrini.name/theme/tipuesearch/css/tipuesearch.css" />
  <link rel="stylesheet" type="text/css" href="http://damien.ciabrini.name/theme/css/blogdump.css" />
  <link rel="stylesheet" type="text/css" href="http://damien.ciabrini.name/theme/css/slide.css" />
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Oswald&#038;ver=3.3.2"/> 
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Inconsolata" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

  <link rel="alternate" type="application/atom+xml"
	title="(blog-dump 'dciabrin) — Atom Feed"
	href="http://damien.ciabrini.name/" /> 
</head>

<body id="body" class="homez blogz" >
  <div id="page">
    <header id="header" class="header section">
        <div class="header-inner section-inner">
            <a class="site-logo noimg" rel="home" title="(blog-dump 'dciabrin)" href="http://damien.ciabrini.name">
                <span class="screen-reader-text"></span>
            </a>
	    <h1 id="site-title" class="site-title">
              <a href="http://damien.ciabrini.name">(blog-dump 'dciabrin)</a>
              <a href="#" id="toggle-menu">☰</a>
            </h1>
<h2 id="site-description" class="site-description">A coding and hacking diary</h2>        </div>
    
    <nav id="header-nav" class="site-navigation">
        <form class="navbar-search" action="http://damien.ciabrini.name/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form>
	<div class="menu-navigation-container"><div class="navigation-inner section-inner">
	    <ul id="menu-navigation" class="blog-menu">
		<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/">Home</a></li>
		    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="http://damien.ciabrini.name/pages/about.html">About</a></li>

			<li class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="http://damien.ciabrini.name/category/code.html">Code</a></li>
			<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="http://damien.ciabrini.name/category/misc.html">Misc</a></li>

			<li  class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/archives.html">Archives</a></li>


	    </ul>
	</div></div> <!--/#menu-navigation-container-->
    </nav><!-- /#menu -->
    </header><!-- /#banner -->
		                    
    <!-- <div id="full"> -->
    <!-- Content -->
    <div class="flexcontent">
    <main class="article">
        <section class="post type-post status-publish format-standard hentry category-general" id="post">
	    <div class="main content-inner">
	        <!-- <div class="post-header"> -->
		<h1 class="post-title">
		    <a href="http://damien.ciabrini.name/posts/2011/05/support-for-aluminium-keyboards-packaged-code-named-apple-kbd.html" title="Permalink to Support for Aluminium Keyboards packaged, code-named apple-kbd" rel="bookmark">Support for Aluminium Keyboards packaged, code-named apple-kbd</a>
		</h1>
		<div class="center post-meta"><span>Damien Ciabrini</span></div>
                <div class="center post-meta">
                    <i class="fa fa-calendar"></i> <a href="http://damien.ciabrini.name/posts/2011/05/support-for-aluminium-keyboards-packaged-code-named-apple-kbd.html">Thu 19 May 2011</a>
                        <span class="sep"></span>
    	                <span class="tag-links"><i class="fa fa-tags"></i>
 <a href="http://damien.ciabrini.name/tag/apple.html" rel="tag">apple</a>,  <a href="http://damien.ciabrini.name/tag/apple-kbd.html" rel="tag">apple-kbd</a>    	                </span>
                </div>
                
                <div class="entry-content">
		    <p>After many episodes, the support for Apple Aluminium Keyboards is
finally becoming user-friendly. All major distribs now ship a recent
version of
<a href="http://www.freedesktop.org/wiki/Software/XKeyboardConfig">xkeyboard-config</a>,
so there is no need to mess with XKB patches anymore...</p>
<p>To complete the user experience, I'm happy to introduce you
<a href="https://github.com/dciabrin/apple-kbd"><code id="tt1099">apple-kbd</code></a>, the
collection of helpful goodies you need for your Aluminium Keyboard under
Linux. Here's what you'll get with this package:</p>


<dl>
<dt>Automatic keyboard detection under X</dt>
<dd>At boot time or when the keyboard is plugged in,
<code id="tt1101">apple-kbd</code> auto-updates the system-wide XKB settings so
that the X server sees the Aluminium Keyboard and enables all its
keys and its geometry.</dd>
<dt>Key style preferences</dt>
<dd><code id="tt1103">apple-kbd</code> lets you remap some of the keyboard's keys:
you'll get back the Insert key, the antique Print, Scroll-Lock and
Pause... You can also set the precedence of functions keys over
multimedia keys.</dd>
<dt>User-friendly installation</dt>
<dd>Both auto-detect and configuration features are available in a
single, easy to install package. If you're running Debian or Ubuntu,
there's even a package for you which comes with interactive
configuration thanks to debconf!</dd>
</dl>
<h2>Installing the debian package of apple-kbd</h2>
<p>I made a <a href="https://launchpad.net/~damien-ciabrini/+archive/apple-kbd">PPA on
Launchpad</a> to
package <code id="tt1107">apple-kbd</code>, so it's super easy to install it on your
Debian or Ubuntu release. The plus of the Debian version compared to the
plain sources is that you'll get a graphical dialog to configure your
key style preferences. The dialog is also localized, only in French for
the time being, but translators are welcome!</p>
<h3>Automatic installation for Ubuntu Natty Narwhal</h3>
<p>To install <code id="tt1109">apple-kbd</code> on Natty, you basically have to follow
the instructions found on Launchpad. Just add the PPA to your list of
available locations:</p>
<div class="highlight"><pre>sudo add-apt-repository ppa:damien-ciabrini/apple-kbd
</pre></div>


<p>And once the PPA repository and its GPG key are imported, you can
install the package as usual:</p>
<div class="highlight"><pre>sudo apt-get update
sudo apt-get install apple-kbd
</pre></div>


<p>The first time you'll install the package, you'll be asked some
questions regarding the behaviour of the keyboard, <em>i.e.</em>, Insert key,
PC keys emulation... At any time, you can reconfigure your keyboard by
typing:</p>
<div class="highlight"><pre>sudo dpkg-reconfigure apple-kbd
</pre></div>


<h3>Manual installation for the others</h3>
<p>Oh damned, you don't run Natty (like me...)! No worries, you can still
proceed the Old Way. Just edit <code id="tt1117">/etc/apt/sources.list</code> and add
the following line at the end of the file:</p>
<div class="highlight"><pre><span class="k">deb</span> <span class="s">http://ppa.launchpad.net/damien-ciabrini/apple-kbd/ubuntu</span> <span class="kp">natty</span> <span class="kp">main</span>
</pre></div>


<p>And you're good to go! Resynchronize the index of available packages and
install <code id="tt1120">apple-kbd</code>:</p>
<div class="highlight"><pre>sudo apt-get update
sudo apt-get install apple-kbd
</pre></div>


<h2>Don't want a Debian package? Get the sources!</h2>
<p>The simplest way of getting <a href="https://github.com/dciabrin/apple-kbd">the sources form
GitHub</a> is to download the latest
<code id="tt1123">apple-kbd</code> archive:</p>
<div class="highlight"><pre>wget --no-check-certificate https://github.com/dciabrin/apple-kbd/tarball/apple-kbd-0.1 -Oapple-kbd-0.1.tar.gz
tar zxvf apple-kbd-0.1.tar.gz
</pre></div>


<p>But you can of course fork my git repository to play with it:</p>
<div class="highlight"><pre>git clone git://github.com/dciabrin/apple-kbd.git
</pre></div>


<p>Have a look at <code id="tt1128">README.rst</code> for the details. Basically, you
want to edit the file <code id="tt1129">apple-kbd</code> to configure your keyboard
preferences (Insert key, PC keyboard emulation...). Then, you need the
usual:</p>
<div class="highlight"><pre>make
sudo make install
</pre></div>


<p>I'm unfortunately a bit lazy, so contrary to the Debian package, you
will need to reboot, or at least to re-plug the keyboard and restart the
X server for your configuration to take effect. In a future version I
will provide a command-line tool to force configuration changes to take
effect on-the-fly.</p>
<h2>Is the support finished?</h2>
<p>I believe <code id="tt1133">apple-kbd</code> is really a milestone in the support of
the Aluminium Keyboards. But of course, everything's perfectible. I
actually see two important things that remain to do. The first one is to
check whether the <a href="https://bugs.launchpad.net/ubuntu/+source/linux/+bug/214786">longstanding ISO-swapped-keys
bug</a> is
really fixed for all the layouts. The second is to add a XKB geometry
for the Wireless Aluminium Keyboards (the short ones). Plenty of work in
perspective...</p>
<p>So here it is, tell the world about <code id="tt1135">apple-kbd</code>, future will
tell if this package is useful!</p>

		</div> <!--/#entry-content-->
	    </div> <!--/#main-->
        </section>  <!--/#post-->
        <div class="hidden">
<aside id="menu" class="side_navigation">
  <h3 class="nav_author">Damien Ciabrini</h3>

  <p>Coder, hacker, dreamer. Worked on compilers,
    debuggers, language runtimes. Passionate
    about distributed computing. Obsessed by
    retro hardware and optimizations.
    <div class="center social-buttons">
        <a class="social fa fa-twitter" href="http://twitter.com/dciabrin"></a>
        <!-- <span class="sep"></span> -->
        <a class="social fa fa-github" href="http://github.com/dciabrin"></a>
        <!-- <span class="sep"></span> -->
        <a class="social fa fa-google-plus" href="https://plus.google.com/+DamienCiabrini"></a>
        <!-- <span class="sep"></span> -->
        <a class="social fa fa-linkedin" href="https://www.linkedin.com/in/damien-ciabrini-70514187"></a>
        <!-- <span class="sep"></span> -->
    </div>
  </p>
    
  <h3>Meta</h3>
  <div class="center">
  <ul>
      <li><a href="http://damien.ciabrini.name/" type="application/atom+xml" rel="alternate" title="ATOM Feed" />Blog Feed <i class="fa fa-rss"></i></a></li>
  </ul>
  </div>
  
  <h3>Categories</h3>
  <div class="center">
  <ul>
        <li><a href="http://damien.ciabrini.name/category/code.html">Code</a> (7)</li>
        <li><a href="http://damien.ciabrini.name/category/misc.html">Misc</a> (1)</li>
  </ul>
  </div>
</aside>        </div>
	<section id="comments">
		<div id="respond">
			<div id="disqus_thread"></div>
	        <script type="text/javascript">
	            var disqus_shortname = 'dciabrin';
	
	            /* * * DON'T EDIT BELOW THIS LINE * * */
	            (function() {
	                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	            })();
	        </script>
	        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
		</div><!-- #respond -->					
        </section><!-- #comments -->
    </main>

    </div>
    <!-- Footer -->
<footer id="footer" class="footer">
  <div class="section-inner">
    &copy; 2008&dash;2015 Damien Ciabrini - Content licensed under <a href="CC-BY 4.0">CC-BY 4.0</a> unless stated otherwise.<br/>
    Theme based on <a href="https://wordpress.com/themes/lingonberry/">Lingonberry</a>,
    icons by <a href="https://fortawesome.github.io/Font-Awesome/">Font Awesome</a><br/>
    Powered by <a href="http://getpelican.com">Pelican</a>, <a href="https://disqus.com">Disqus</a><br/>

<script type="text/javascript">
    var disqus_shortname = 'dciabrin';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>  </div>
</footer><!-- /#footer -->    </div>
  <!-- </div> -->
  <script src="http://damien.ciabrini.name/theme/slide.js"></script>
</body>
</html>